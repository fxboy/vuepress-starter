(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{397:function(t,a,e){"use strict";e.r(a);var s=e(22),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"实现接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现接口"}},[t._v("#")]),t._v(" 实现接口")]),t._v(" "),e("p",[t._v("我们为每一个操作都提供了一个接口，您只需要将这些接口类实现然后通过配置文件告诉框架,当触发一些操作时，将会执行您提供的接口类，您实现的接口需要在配置文件内添加"),e("a",{attrs:{href:"properties#properties"}},[t._v("properties文档")])]),t._v(" "),e("h2",{attrs:{id:"全部接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全部接口"}},[t._v("#")]),t._v(" 全部接口")]),t._v(" "),e("p",[t._v("在开始我们说过，框架仅用于角色和操作权限、提交方式等校验，并不干涉您的其他操作，例如，获取用户角色或操作权限是用token来获取还是cookie或者session，我们都不做任何干涉，我们只提供request让您来获取。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("接口")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("认证传权校验")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("VerifyAuthorityHandler")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("认证校验成功")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("AuthenticationSuccessfulHandler")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("认证校验失败")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("AuthenticationFailureHandler")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("校验异常处理")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("AuthenticationExceptionHandler")])])])]),t._v(" "),e("h2",{attrs:{id:"认证传权校验"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#认证传权校验"}},[t._v("#")]),t._v(" 认证传权校验")]),t._v(" "),e("p",[t._v("认证传权，也就是我们判断角色权限最重要的一个操作，您可以实现此接口后，在方法内写您来获取角色和权限的操作方法，并使用 Authentications 类保存roles和permission")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authentications")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("verifyAuthority")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationException")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("request")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpServletRequest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("客户端的请求,当用户发出请求后，如果被拦截到权限校验，则会执行这个方法，并把当时的请求对象带过来")])])])]),t._v(" "),e("h3",{attrs:{id:"返回"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#返回"}},[t._v("#")]),t._v(" 返回")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("返回类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("Authentications")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("权限保存对象，具体请看 "),e("a",{attrs:{href:"Object#Authentications"}},[t._v("Authentications文档")])])])])]),t._v(" "),e("h3",{attrs:{id:"使用示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VerifyAuthorityImpl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VerifyAuthorityHandler")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authentications")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenAuthentication")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TokenVerificationFailedException")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//请在此处写您获取roles和permissions的操作")]),t._v("\n        \n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将获取到的roles和permissions保存到Authentications，并将其返回")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authentications")]),t._v(" authentications  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authentications")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        authentications"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("role1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("permission1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" authentications"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h2",{attrs:{id:"认证校验成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#认证校验成功"}},[t._v("#")]),t._v(" 认证校验成功")]),t._v(" "),e("p",[t._v("校验成功后，是否要执行一些操作，例如 访问日志或者续签等操作")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticationSuccessful")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProceedingJoinPoint")]),t._v(" proceedingJoinPoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"参数-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数-2"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("request")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpServletRequest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("客户端的请求,当用户发出请求后，如果被拦截到权限校验，则会执行这个方法，并把当时的请求对象带过来")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("response")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpServletResponse")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("响应，成功后可以直接通过这个转发页面或者进行其他操作，如果是打印的话，会在获取的内容前添加打印的内容")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("proceedingJoinPoint")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("ProceedingJoinPoint")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("环绕通知带过来的对象，可以使用这个对象获取到拦截的类等，具体看Spring Aop的文档吧")])])])]),t._v(" "),e("h3",{attrs:{id:"使用示例-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用示例-2"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"认证校验失败"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#认证校验失败"}},[t._v("#")]),t._v(" 认证校验失败")]),t._v(" "),e("p",[t._v("认证校验失败后，需要提示到页面的内容，如果是异步，直接打印json就行了，如果是同步可以直接转发到一个新页面")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticationFailure")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"参数-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数-3"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("request")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpServletRequest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("客户端的请求,当用户发出请求后，如果被拦截到权限校验，则会执行这个方法，并把当时的请求对象带过来")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("response")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpServletResponse")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("响应，成功后可以直接通过这个转发页面或者进行其他操作，如果是打印的话，会在获取的内容前添加打印的内容")])])])]),t._v(" "),e("h3",{attrs:{id:"使用示例-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用示例-3"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"校验异常处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#校验异常处理"}},[t._v("#")]),t._v(" 校验异常处理")]),t._v(" "),e("p",[t._v("校验异常处理，不校验java自带的和框架内一些特定的运行时异常，只会拦截自己手动抛出的AuthenticationException异常")]),t._v(" "),e("p",[e("a",{attrs:{href:"../exception/AuthenticationException"}},[t._v("AuthenticationException")])]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticationException")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProceedingJoinPoint")]),t._v(" proceedingJoinPoint"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" ex"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("request")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpServletRequest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("客户端的请求,当用户发出请求后，如果被拦截到权限校验，则会执行这个方法，并把当时的请求对象带过来")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("response")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HttpServletResponse")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("响应，成功后可以直接通过这个转发页面或者进行其他操作，如果是打印的话，会在获取的内容前添加打印的内容")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("proceedingJoinPoint")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("ProceedingJoinPoint")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("环绕通知带过来的对象，可以使用这个对象获取到拦截的类等，具体看Spring Aop的文档吧")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("em",[t._v("ex")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Exception")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("把抛出的异常对象传过来")])])])]),t._v(" "),e("h3",{attrs:{id:"使用示例-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用示例-4"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);